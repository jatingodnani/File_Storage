{"ast":null,"code":"import * as qrcode from 'qrcode-generator';\nimport { Logger } from '@airgap/beacon-core';\nconst logger = new Logger('QR');\n/**\n * Convert data to a QR code\n *\n * @param payload The data to be encoded as a QR code\n * @param type How the QR code will be encoded\n */\nexport const getQrData = (payload, type) => {\n  const typeNumber = 0;\n  const errorCorrectionLevel = 'L';\n  const qr = qrcode(typeNumber, errorCorrectionLevel);\n  if (payload.length > 500) {\n    logger.warn('getQrData', 'The size of the payload in the QR code is quite long and some devices might not be able to scan it anymore. To reduce the QR size, try using a shorter \"name\", \"appUrl\" and \"iconUrl\"');\n  }\n  try {\n    qr.addData(payload);\n    qr.make();\n    if (type === 'svg') {\n      return qr.createSvgTag();\n    } else if (type === 'ascii') {\n      const length = qr.getModuleCount();\n      const black = '\\x1B[40m  \\x1B[0m';\n      const white = '\\x1B[47m  \\x1B[0m';\n      const whiteLine = new Array(length + 3).join(white);\n      const blackLine = new Array(length + 3).join(black);\n      let ascii = '';\n      ascii += `${blackLine}\\n`;\n      ascii += `${whiteLine}\\n`;\n      for (let x = 0; x < length; x++) {\n        ascii += white;\n        for (let y = 0; y < length; y++) {\n          ascii += qr.isDark(x, y) ? black : white;\n        }\n        ascii += `${white}\\n`;\n      }\n      ascii += whiteLine;\n      ascii += blackLine;\n      return ascii;\n    } else {\n      return qr.createDataURL();\n    }\n  } catch (qrError) {\n    console.error('error', qrError);\n    throw qrError;\n  }\n};","map":{"version":3,"names":["qrcode","Logger","logger","getQrData","payload","type","typeNumber","errorCorrectionLevel","qr","length","warn","addData","make","createSvgTag","getModuleCount","black","white","whiteLine","Array","join","blackLine","ascii","x","y","isDark","createDataURL","qrError","console","error"],"sources":["../../../src/utils/qr.ts"],"sourcesContent":[null],"mappings":"AAAA,OAAO,KAAKA,MAAM,MAAM,kBAAkB;AAC1C,SAASC,MAAM,QAAQ,qBAAqB;AAE5C,MAAMC,MAAM,GAAG,IAAID,MAAM,CAAC,IAAI,CAAC;AAE/B;;;;;;AAMA,OAAO,MAAME,SAAS,GAAGA,CAACC,OAAe,EAAEC,IAA+B,KAAY;EACpF,MAAMC,UAAU,GAAe,CAAC;EAChC,MAAMC,oBAAoB,GAAyB,GAAG;EACtD,MAAMC,EAAE,GAAIR,MAAc,CAACM,UAAU,EAAEC,oBAAoB,CAAC;EAE5D,IAAIH,OAAO,CAACK,MAAM,GAAG,GAAG,EAAE;IACxBP,MAAM,CAACQ,IAAI,CACT,WAAW,EACX,uLAAuL,CACxL;;EAGH,IAAI;IACFF,EAAE,CAACG,OAAO,CAACP,OAAO,CAAC;IACnBI,EAAE,CAACI,IAAI,EAAE;IACT,IAAIP,IAAI,KAAK,KAAK,EAAE;MAClB,OAAOG,EAAE,CAACK,YAAY,EAAE;KACzB,MAAM,IAAIR,IAAI,KAAK,OAAO,EAAE;MAC3B,MAAMI,MAAM,GAAWD,EAAE,CAACM,cAAc,EAAE;MAC1C,MAAMC,KAAK,GAAG,mBAAmB;MACjC,MAAMC,KAAK,GAAG,mBAAmB;MACjC,MAAMC,SAAS,GAAG,IAAIC,KAAK,CAACT,MAAM,GAAG,CAAC,CAAC,CAACU,IAAI,CAACH,KAAK,CAAC;MACnD,MAAMI,SAAS,GAAG,IAAIF,KAAK,CAACT,MAAM,GAAG,CAAC,CAAC,CAACU,IAAI,CAACJ,KAAK,CAAC;MAEnD,IAAIM,KAAK,GAAG,EAAE;MACdA,KAAK,IAAI,GAAGD,SAAS,IAAI;MACzBC,KAAK,IAAI,GAAGJ,SAAS,IAAI;MACzB,KAAK,IAAIK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGb,MAAM,EAAEa,CAAC,EAAE,EAAE;QAC/BD,KAAK,IAAIL,KAAK;QAEd,KAAK,IAAIO,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGd,MAAM,EAAEc,CAAC,EAAE,EAAE;UAC/BF,KAAK,IAAIb,EAAE,CAACgB,MAAM,CAACF,CAAC,EAAEC,CAAC,CAAC,GAAGR,KAAK,GAAGC,KAAK;;QAG1CK,KAAK,IAAI,GAAGL,KAAK,IAAI;;MAEvBK,KAAK,IAAIJ,SAAS;MAClBI,KAAK,IAAID,SAAS;MAElB,OAAOC,KAAK;KACb,MAAM;MACL,OAAOb,EAAE,CAACiB,aAAa,EAAE;;GAE5B,CAAC,OAAOC,OAAO,EAAE;IAChBC,OAAO,CAACC,KAAK,CAAC,OAAO,EAAEF,OAAO,CAAC;IAC/B,MAAMA,OAAO;;AAEjB,CAAC"},"metadata":{},"sourceType":"module"}