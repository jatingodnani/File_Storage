{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { openAlert, closeAlerts, closeToast, openToast } from '@airgap/beacon-dapp';\nimport { BeaconErrorType } from '@airgap/beacon-types';\nimport { UnknownBeaconError, BeaconError, Logger\n// EncryptPayloadResponseOutput,\n// EncryptionOperation\n} from '@airgap/beacon-core';\nimport { shortenString } from './utils/shorten-string';\nimport { isMobile } from '@airgap/beacon-ui';\nconst logger = new Logger('BeaconEvents');\nconst SUCCESS_TIMER = 5 * 1000;\n/**\r\n * The different events that can be emitted by the beacon-sdk\r\n */\nexport var BeaconEvent;\n(function (BeaconEvent) {\n  BeaconEvent[\"PERMISSION_REQUEST_SENT\"] = \"PERMISSION_REQUEST_SENT\";\n  BeaconEvent[\"PERMISSION_REQUEST_SUCCESS\"] = \"PERMISSION_REQUEST_SUCCESS\";\n  BeaconEvent[\"PERMISSION_REQUEST_ERROR\"] = \"PERMISSION_REQUEST_ERROR\";\n  BeaconEvent[\"OPERATION_REQUEST_SENT\"] = \"OPERATION_REQUEST_SENT\";\n  BeaconEvent[\"OPERATION_REQUEST_SUCCESS\"] = \"OPERATION_REQUEST_SUCCESS\";\n  BeaconEvent[\"OPERATION_REQUEST_ERROR\"] = \"OPERATION_REQUEST_ERROR\";\n  BeaconEvent[\"SIGN_REQUEST_SENT\"] = \"SIGN_REQUEST_SENT\";\n  BeaconEvent[\"SIGN_REQUEST_SUCCESS\"] = \"SIGN_REQUEST_SUCCESS\";\n  BeaconEvent[\"SIGN_REQUEST_ERROR\"] = \"SIGN_REQUEST_ERROR\";\n  // TODO: ENCRYPTION\n  // ENCRYPT_REQUEST_SENT = 'ENCRYPT_REQUEST_SENT',\n  // ENCRYPT_REQUEST_SUCCESS = 'ENCRYPT_REQUEST_SUCCESS',\n  // ENCRYPT_REQUEST_ERROR = 'ENCRYPT_REQUEST_ERROR',\n  BeaconEvent[\"BROADCAST_REQUEST_SENT\"] = \"BROADCAST_REQUEST_SENT\";\n  BeaconEvent[\"BROADCAST_REQUEST_SUCCESS\"] = \"BROADCAST_REQUEST_SUCCESS\";\n  BeaconEvent[\"BROADCAST_REQUEST_ERROR\"] = \"BROADCAST_REQUEST_ERROR\";\n  BeaconEvent[\"ACKNOWLEDGE_RECEIVED\"] = \"ACKNOWLEDGE_RECEIVED\";\n  BeaconEvent[\"LOCAL_RATE_LIMIT_REACHED\"] = \"LOCAL_RATE_LIMIT_REACHED\";\n  BeaconEvent[\"NO_PERMISSIONS\"] = \"NO_PERMISSIONS\";\n  BeaconEvent[\"ACTIVE_ACCOUNT_SET\"] = \"ACTIVE_ACCOUNT_SET\";\n  BeaconEvent[\"ACTIVE_TRANSPORT_SET\"] = \"ACTIVE_TRANSPORT_SET\";\n  BeaconEvent[\"SHOW_PREPARE\"] = \"SHOW_PREPARE\";\n  BeaconEvent[\"HIDE_UI\"] = \"HIDE_UI\";\n  BeaconEvent[\"PAIR_INIT\"] = \"PAIR_INIT\";\n  BeaconEvent[\"PAIR_SUCCESS\"] = \"PAIR_SUCCESS\";\n  BeaconEvent[\"CHANNEL_CLOSED\"] = \"CHANNEL_CLOSED\";\n  BeaconEvent[\"INTERNAL_ERROR\"] = \"INTERNAL_ERROR\";\n  BeaconEvent[\"UNKNOWN\"] = \"UNKNOWN\";\n})(BeaconEvent || (BeaconEvent = {}));\n/**\r\n * Show a \"Request sent\" toast\r\n */\nconst showSentToast = data => __awaiter(void 0, void 0, void 0, function* () {\n  let openWalletAction;\n  const actions = [];\n  if (data.walletInfo.deeplink) {\n    if (data.walletInfo.type === 'web' || data.walletInfo.type === 'mobile' && isMobile(window) || data.walletInfo.type === 'desktop' && !isMobile(window)) {\n      const link = data.walletInfo.deeplink;\n      openWalletAction = () => __awaiter(void 0, void 0, void 0, function* () {\n        const a = document.createElement('a');\n        a.setAttribute('href', link);\n        a.setAttribute('target', '_blank');\n        a.dispatchEvent(new MouseEvent('click', {\n          view: window,\n          bubbles: true,\n          cancelable: true\n        }));\n      });\n    }\n  }\n  actions.push({\n    text: `No answer from your wallet received yet. Please make sure the wallet is open.`,\n    isBold: true\n  });\n  actions.push({\n    text: 'Did you make a mistake?',\n    actionText: 'Cancel Request',\n    actionCallback: () => __awaiter(void 0, void 0, void 0, function* () {\n      yield closeToast();\n    })\n  });\n  actions.push({\n    text: 'Wallet not receiving request?',\n    actionText: 'Reset Connection',\n    actionCallback: () => __awaiter(void 0, void 0, void 0, function* () {\n      yield closeToast();\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      const resetCallback = data.extraInfo.resetCallback;\n      if (resetCallback) {\n        logger.log('showSentToast', 'resetCallback invoked');\n        yield resetCallback();\n      }\n    })\n  });\n  openToast({\n    body: `Request sent to\\u00A0 {{wallet}}`,\n    walletInfo: data.walletInfo,\n    state: 'loading',\n    actions,\n    openWalletAction\n  }).catch(toastError => console.error(toastError));\n});\nconst showAcknowledgedToast = data => __awaiter(void 0, void 0, void 0, function* () {\n  openToast({\n    body: 'Awaiting confirmation in\\u00A0 {{wallet}}',\n    state: 'acknowledge',\n    walletInfo: data.walletInfo\n  }).catch(toastError => console.error(toastError));\n});\nconst showPrepare = data => __awaiter(void 0, void 0, void 0, function* () {\n  const text = data.walletInfo ? `Preparing Request for\\u00A0 {{wallet}}...` : 'Preparing Request...';\n  openToast({\n    body: text,\n    state: 'prepare',\n    walletInfo: data.walletInfo\n  }).catch(toastError => console.error(toastError));\n});\nconst hideUI = elements => __awaiter(void 0, void 0, void 0, function* () {\n  if (elements) {\n    if (elements.includes('alert')) {\n      closeAlerts();\n    }\n    if (elements.includes('toast')) {\n      closeToast();\n    }\n  } else {\n    closeToast();\n  }\n});\n/**\r\n * Show a \"No Permission\" alert\r\n */\nconst showNoPermissionAlert = () => __awaiter(void 0, void 0, void 0, function* () {\n  yield openAlert({\n    title: 'No Permission',\n    body: 'Please allow the wallet to handle this type of request.'\n  });\n});\n/**\r\n * Show an error toast\r\n *\r\n * @param beaconError The beacon error\r\n */\nconst showErrorToast = (response, buttons) => __awaiter(void 0, void 0, void 0, function* () {\n  var _a, _b, _c, _d, _e, _f;\n  const error = response.errorResponse.errorType ? BeaconError.getError(response.errorResponse.errorType, response.errorResponse.errorData) : new UnknownBeaconError();\n  const actions = [{\n    text: error.title,\n    isBold: true\n  }];\n  if (response.errorResponse.errorType === BeaconErrorType.TRANSACTION_INVALID_ERROR && response.errorResponse.errorData) {\n    const err = response.errorResponse.errorData;\n    const errorMessages = response.errorMessages;\n    let hasHumandReadableError = false;\n    if (((_a = err[0]) === null || _a === void 0 ? void 0 : _a.contract_handle) && errorMessages && (errorMessages === null || errorMessages === void 0 ? void 0 : errorMessages[err[0].contract_handle])) {\n      const errCode = (_d = (_c = (_b = err[1]) === null || _b === void 0 ? void 0 : _b.with) === null || _c === void 0 ? void 0 : _c.int) !== null && _d !== void 0 ? _d : (_f = (_e = err[1]) === null || _e === void 0 ? void 0 : _e.with) === null || _f === void 0 ? void 0 : _f.string;\n      const contractErrors = errorMessages === null || errorMessages === void 0 ? void 0 : errorMessages[err[0].contract_handle];\n      if (errCode && (contractErrors === null || contractErrors === void 0 ? void 0 : contractErrors[errCode])) {\n        actions.push({\n          text: contractErrors === null || contractErrors === void 0 ? void 0 : contractErrors[errCode],\n          isBold: true\n        });\n        hasHumandReadableError = true;\n      }\n    }\n    if (!hasHumandReadableError) {\n      actions.push({\n        text: error.description\n      });\n    }\n    actions.push({\n      text: '',\n      actionText: 'Show Details',\n      actionCallback: () => __awaiter(void 0, void 0, void 0, function* () {\n        yield closeToast();\n        yield openAlert({\n          title: error.title,\n          // eslint-disable-next-line @typescript-eslint/unbound-method\n          body: error.fullDescription.description,\n          data: error.fullDescription.data,\n          buttons\n        });\n      })\n    });\n  }\n  yield openToast({\n    body: `{{wallet}}\\u00A0 has returned an error`,\n    timer: response.errorResponse.errorType === BeaconErrorType.ABORTED_ERROR ? SUCCESS_TIMER : undefined,\n    state: 'finished',\n    walletInfo: response.walletInfo,\n    actions\n  });\n});\n/**\r\n * Show a rate limit reached toast\r\n */\nconst showRateLimitReached = () => __awaiter(void 0, void 0, void 0, function* () {\n  openAlert({\n    title: 'Error',\n    body: 'Rate limit reached. Please slow down',\n    buttons: [{\n      text: 'Done',\n      style: 'outline'\n    }],\n    timer: 3000\n  }).catch(toastError => console.error(toastError));\n});\n/**\r\n * Show a \"connection successful\" alert for 1.5 seconds\r\n */\nconst showExtensionConnectedAlert = () => __awaiter(void 0, void 0, void 0, function* () {\n  yield closeAlerts();\n});\n/**\r\n * Show a \"channel closed\" alert for 1.5 seconds\r\n */\nconst showChannelClosedAlert = () => __awaiter(void 0, void 0, void 0, function* () {\n  yield openAlert({\n    title: 'Channel closed',\n    body: `Your peer has closed the connection.`,\n    buttons: [{\n      text: 'Done',\n      style: 'outline'\n    }],\n    timer: 1500\n  });\n});\nconst showInternalErrorAlert = data => __awaiter(void 0, void 0, void 0, function* () {\n  var _g;\n  const buttons = [...((_g = data.buttons) !== null && _g !== void 0 ? _g : [])];\n  buttons.push({\n    text: 'Done',\n    style: 'outline'\n  });\n  const alertConfig = {\n    title: 'Internal Error',\n    body: data.text,\n    buttons\n  };\n  yield openAlert(alertConfig);\n});\n/**\r\n * Show a connect alert with QR code\r\n *\r\n * @param data The data that is emitted by the PAIR_INIT event\r\n */\nconst showPairAlert = data => __awaiter(void 0, void 0, void 0, function* () {\n  const alertConfig = {\n    title: 'Choose your preferred wallet',\n    body: `<p></p>`,\n    pairingPayload: {\n      p2pSyncCode: data.p2pPeerInfo,\n      postmessageSyncCode: data.postmessagePeerInfo,\n      preferredNetwork: data.preferredNetwork\n    },\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    closeButtonCallback: data.abortedHandler,\n    disclaimerText: data.disclaimerText\n  };\n  yield openAlert(alertConfig);\n});\n/**\r\n * Show a \"Permission Granted\" alert\r\n *\r\n * @param data The data that is emitted by the PERMISSION_REQUEST_SUCCESS event\r\n */\nconst showPermissionSuccessAlert = data => __awaiter(void 0, void 0, void 0, function* () {\n  const {\n    output\n  } = data;\n  yield openToast({\n    body: `{{wallet}}\\u00A0 has granted permission`,\n    timer: SUCCESS_TIMER,\n    walletInfo: data.walletInfo,\n    state: 'finished',\n    actions: [{\n      text: 'Address',\n      actionText: shortenString(output.address),\n      isBold: true\n    }, {\n      text: 'Network',\n      actionText: `${output.network.type}`\n    }, {\n      text: 'Permissions',\n      actionText: output.scopes.join(', ')\n    }]\n  });\n});\n/**\r\n * Show an \"Operation Broadcasted\" alert\r\n *\r\n * @param data The data that is emitted by the OPERATION_REQUEST_SUCCESS event\r\n */\nconst showOperationSuccessAlert = data => __awaiter(void 0, void 0, void 0, function* () {\n  const {\n    account,\n    output,\n    blockExplorer\n  } = data;\n  yield openToast({\n    body: `{{wallet}}\\u00A0 successfully submitted operation`,\n    timer: SUCCESS_TIMER,\n    state: 'finished',\n    walletInfo: data.walletInfo,\n    actions: [{\n      text: shortenString(output.transactionHash),\n      isBold: true,\n      actionText: `Open Blockexplorer`,\n      actionLogo: 'external',\n      actionCallback: () => __awaiter(void 0, void 0, void 0, function* () {\n        const link = yield blockExplorer.getTransactionLink(output.transactionHash, account.network);\n        window.open(link, '_blank');\n        yield closeToast();\n      })\n    }]\n  });\n});\n/**\r\n * Show a \"Transaction Signed\" alert\r\n *\r\n * @param data The data that is emitted by the SIGN_REQUEST_SUCCESS event\r\n */\nconst showSignSuccessAlert = data => __awaiter(void 0, void 0, void 0, function* () {\n  const output = data.output;\n  yield openToast({\n    body: `{{wallet}}\\u00A0 successfully signed payload`,\n    timer: SUCCESS_TIMER,\n    state: 'finished',\n    walletInfo: data.walletInfo,\n    actions: [{\n      text: `Signature: ${shortenString(output.signature)}`,\n      actionText: 'Copy to clipboard',\n      actionCallback: () => __awaiter(void 0, void 0, void 0, function* () {\n        navigator.clipboard.writeText(output.signature).then(() => {\n          logger.log('showSignSuccessAlert', 'Copying to clipboard was successful!');\n        }, err => {\n          logger.error('showSignSuccessAlert', 'Could not copy text to clipboard: ', err);\n        });\n        yield closeToast();\n      })\n    }]\n  });\n});\n/**\r\n * Show a \"Transaction Signed\" alert\r\n *\r\n * @param data The data that is emitted by the ENCRYPT_REQUEST_SUCCESS event\r\n */\n// TODO: ENCRYPTION\n// const showEncryptSuccessAlert = async (\n//   data: BeaconEventType[BeaconEvent.ENCRYPT_REQUEST_SUCCESS]\n// ): Promise<void> => {\n//   const output = data.output\n//   await openToast({\n//     body: `{{wallet}}\\u00A0 successfully ${\n//       data.output.cryptoOperation === EncryptionOperation.ENCRYPT ? 'encrypted' : 'decrypted'\n//     } payload`,\n//     timer: SUCCESS_TIMER,\n//     state: 'finished',\n//     walletInfo: data.walletInfo,\n//     actions: [\n//       {\n//         text: `Payload: <strong>${shortenString(output.payload)}</strong>`,\n//         actionText: 'Copy to clipboard',\n//         actionCallback: async (): Promise<void> => {\n//           navigator.clipboard.writeText(output.payload).then(\n//             () => {\n//               logger.log('showSignSuccessAlert', 'Copying to clipboard was successful!')\n//             },\n//             (err) => {\n//               logger.error('showSignSuccessAlert', 'Could not copy text to clipboard: ', err)\n//             }\n//           )\n//           await closeToast()\n//         }\n//       }\n//     ]\n//   })\n// }\n/**\r\n * Show a \"Broadcasted\" alert\r\n *\r\n * @param data The data that is emitted by the BROADCAST_REQUEST_SUCCESS event\r\n */\nconst showBroadcastSuccessAlert = data => __awaiter(void 0, void 0, void 0, function* () {\n  const {\n    network,\n    output,\n    blockExplorer\n  } = data;\n  yield openToast({\n    body: `{{wallet}}\\u00A0 successfully injected operation`,\n    timer: SUCCESS_TIMER,\n    state: 'finished',\n    walletInfo: data.walletInfo,\n    actions: [{\n      text: shortenString(output.transactionHash),\n      isBold: true,\n      actionText: `Open Blockexplorer`,\n      actionLogo: 'external',\n      actionCallback: () => __awaiter(void 0, void 0, void 0, function* () {\n        const link = yield blockExplorer.getTransactionLink(output.transactionHash, network);\n        window.open(link, '_blank');\n        yield closeToast();\n      })\n    }]\n  });\n});\nconst emptyHandler = () => () => __awaiter(void 0, void 0, void 0, function* () {\n  //\n});\n/**\r\n * The default event handlers\r\n */\nexport const defaultEventCallbacks = {\n  [BeaconEvent.PERMISSION_REQUEST_SENT]: showSentToast,\n  [BeaconEvent.PERMISSION_REQUEST_SUCCESS]: showPermissionSuccessAlert,\n  [BeaconEvent.PERMISSION_REQUEST_ERROR]: showErrorToast,\n  [BeaconEvent.OPERATION_REQUEST_SENT]: showSentToast,\n  [BeaconEvent.OPERATION_REQUEST_SUCCESS]: showOperationSuccessAlert,\n  [BeaconEvent.OPERATION_REQUEST_ERROR]: showErrorToast,\n  [BeaconEvent.SIGN_REQUEST_SENT]: showSentToast,\n  [BeaconEvent.SIGN_REQUEST_SUCCESS]: showSignSuccessAlert,\n  [BeaconEvent.SIGN_REQUEST_ERROR]: showErrorToast,\n  // TODO: ENCRYPTION\n  // [BeaconEvent.ENCRYPT_REQUEST_SENT]: showSentToast,\n  // [BeaconEvent.ENCRYPT_REQUEST_SUCCESS]: showEncryptSuccessAlert,\n  // [BeaconEvent.ENCRYPT_REQUEST_ERROR]: showErrorToast,\n  [BeaconEvent.BROADCAST_REQUEST_SENT]: showSentToast,\n  [BeaconEvent.BROADCAST_REQUEST_SUCCESS]: showBroadcastSuccessAlert,\n  [BeaconEvent.BROADCAST_REQUEST_ERROR]: showErrorToast,\n  [BeaconEvent.ACKNOWLEDGE_RECEIVED]: showAcknowledgedToast,\n  [BeaconEvent.LOCAL_RATE_LIMIT_REACHED]: showRateLimitReached,\n  [BeaconEvent.NO_PERMISSIONS]: showNoPermissionAlert,\n  [BeaconEvent.ACTIVE_ACCOUNT_SET]: emptyHandler(),\n  [BeaconEvent.ACTIVE_TRANSPORT_SET]: emptyHandler(),\n  [BeaconEvent.SHOW_PREPARE]: showPrepare,\n  [BeaconEvent.HIDE_UI]: hideUI,\n  [BeaconEvent.PAIR_INIT]: showPairAlert,\n  [BeaconEvent.PAIR_SUCCESS]: showExtensionConnectedAlert,\n  [BeaconEvent.CHANNEL_CLOSED]: showChannelClosedAlert,\n  [BeaconEvent.INTERNAL_ERROR]: showInternalErrorAlert,\n  [BeaconEvent.UNKNOWN]: emptyHandler()\n};\n/**\r\n * @internalapi\r\n *\r\n * Handles beacon events\r\n */\nexport class BeaconEventHandler {\n  constructor() {\n    let eventsToOverride = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let overrideAll = arguments.length > 1 ? arguments[1] : undefined;\n    this.callbackMap = {\n      [BeaconEvent.PERMISSION_REQUEST_SENT]: [defaultEventCallbacks.PERMISSION_REQUEST_SENT],\n      [BeaconEvent.PERMISSION_REQUEST_SUCCESS]: [defaultEventCallbacks.PERMISSION_REQUEST_SUCCESS],\n      [BeaconEvent.PERMISSION_REQUEST_ERROR]: [defaultEventCallbacks.PERMISSION_REQUEST_ERROR],\n      [BeaconEvent.OPERATION_REQUEST_SENT]: [defaultEventCallbacks.OPERATION_REQUEST_SENT],\n      [BeaconEvent.OPERATION_REQUEST_SUCCESS]: [defaultEventCallbacks.OPERATION_REQUEST_SUCCESS],\n      [BeaconEvent.OPERATION_REQUEST_ERROR]: [defaultEventCallbacks.OPERATION_REQUEST_ERROR],\n      [BeaconEvent.SIGN_REQUEST_SENT]: [defaultEventCallbacks.SIGN_REQUEST_SENT],\n      [BeaconEvent.SIGN_REQUEST_SUCCESS]: [defaultEventCallbacks.SIGN_REQUEST_SUCCESS],\n      [BeaconEvent.SIGN_REQUEST_ERROR]: [defaultEventCallbacks.SIGN_REQUEST_ERROR],\n      // TODO: ENCRYPTION\n      // [BeaconEvent.ENCRYPT_REQUEST_SENT]: [defaultEventCallbacks.ENCRYPT_REQUEST_SENT],\n      // [BeaconEvent.ENCRYPT_REQUEST_SUCCESS]: [defaultEventCallbacks.ENCRYPT_REQUEST_SUCCESS],\n      // [BeaconEvent.ENCRYPT_REQUEST_ERROR]: [defaultEventCallbacks.ENCRYPT_REQUEST_ERROR],\n      [BeaconEvent.BROADCAST_REQUEST_SENT]: [defaultEventCallbacks.BROADCAST_REQUEST_SENT],\n      [BeaconEvent.BROADCAST_REQUEST_SUCCESS]: [defaultEventCallbacks.BROADCAST_REQUEST_SUCCESS],\n      [BeaconEvent.BROADCAST_REQUEST_ERROR]: [defaultEventCallbacks.BROADCAST_REQUEST_ERROR],\n      [BeaconEvent.ACKNOWLEDGE_RECEIVED]: [defaultEventCallbacks.ACKNOWLEDGE_RECEIVED],\n      [BeaconEvent.LOCAL_RATE_LIMIT_REACHED]: [defaultEventCallbacks.LOCAL_RATE_LIMIT_REACHED],\n      [BeaconEvent.NO_PERMISSIONS]: [defaultEventCallbacks.NO_PERMISSIONS],\n      [BeaconEvent.ACTIVE_ACCOUNT_SET]: [defaultEventCallbacks.ACTIVE_ACCOUNT_SET],\n      [BeaconEvent.ACTIVE_TRANSPORT_SET]: [defaultEventCallbacks.ACTIVE_TRANSPORT_SET],\n      [BeaconEvent.SHOW_PREPARE]: [defaultEventCallbacks.SHOW_PREPARE],\n      [BeaconEvent.HIDE_UI]: [defaultEventCallbacks.HIDE_UI],\n      [BeaconEvent.PAIR_INIT]: [defaultEventCallbacks.PAIR_INIT],\n      [BeaconEvent.PAIR_SUCCESS]: [defaultEventCallbacks.PAIR_SUCCESS],\n      [BeaconEvent.CHANNEL_CLOSED]: [defaultEventCallbacks.CHANNEL_CLOSED],\n      [BeaconEvent.INTERNAL_ERROR]: [defaultEventCallbacks.INTERNAL_ERROR],\n      [BeaconEvent.UNKNOWN]: [defaultEventCallbacks.UNKNOWN]\n    };\n    if (overrideAll) {\n      this.setAllHandlers();\n    }\n    this.overrideDefaults(eventsToOverride);\n  }\n  /**\r\n   * A method to subscribe to a specific beacon event and register a callback\r\n   *\r\n   * @param event The event being emitted\r\n   * @param eventCallback The callback that will be invoked\r\n   */\n  on(event, eventCallback) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const listeners = this.callbackMap[event] || [];\n      listeners.push(eventCallback);\n      this.callbackMap[event] = listeners;\n    });\n  }\n  /**\r\n   * Emit a beacon event\r\n   *\r\n   * @param event The event being emitted\r\n   * @param data The data to be emit\r\n   */\n  emit(event, data, eventCallback) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const listeners = this.callbackMap[event];\n      if (listeners && listeners.length > 0) {\n        listeners.forEach(listener => __awaiter(this, void 0, void 0, function* () {\n          try {\n            yield listener(data, eventCallback);\n          } catch (listenerError) {\n            logger.error(`error handling event ${event}`, listenerError);\n          }\n        }));\n      }\n    });\n  }\n  /**\r\n   * Override beacon event default callbacks. This can be used to disable default alert/toast behaviour\r\n   *\r\n   * @param eventsToOverride An object with the events to override\r\n   */\n  overrideDefaults(eventsToOverride) {\n    Object.keys(eventsToOverride).forEach(untypedEvent => {\n      const eventType = untypedEvent;\n      const event = eventsToOverride[eventType];\n      if (event) {\n        this.callbackMap[eventType] = [event.handler];\n      }\n    });\n  }\n  /**\r\n   * Set all event callbacks to a specific handler.\r\n   */\n  setAllHandlers(handler) {\n    Object.keys(this.callbackMap).forEach(untypedEvent => {\n      const eventType = untypedEvent;\n      this.callbackMap[eventType] = [];\n      if (handler) {\n        this.callbackMap[eventType].push(handler);\n      } else {\n        this.callbackMap[eventType].push(function () {\n          for (var _len = arguments.length, data = new Array(_len), _key = 0; _key < _len; _key++) {\n            data[_key] = arguments[_key];\n          }\n          logger.log(untypedEvent, ...data);\n        });\n      }\n    });\n  }\n}","map":{"version":3,"names":["openAlert","closeAlerts","closeToast","openToast","BeaconErrorType","UnknownBeaconError","BeaconError","Logger","shortenString","isMobile","logger","SUCCESS_TIMER","BeaconEvent","showSentToast","data","__awaiter","openWalletAction","actions","walletInfo","deeplink","type","window","link","a","document","createElement","setAttribute","dispatchEvent","MouseEvent","view","bubbles","cancelable","push","text","isBold","actionText","actionCallback","resetCallback","extraInfo","log","body","state","catch","toastError","console","error","showAcknowledgedToast","showPrepare","hideUI","elements","includes","showNoPermissionAlert","title","showErrorToast","response","buttons","errorResponse","errorType","getError","errorData","TRANSACTION_INVALID_ERROR","err","errorMessages","hasHumandReadableError","_a","contract_handle","errCode","_d","_c","_b","with","int","_f","_e","string","contractErrors","description","fullDescription","timer","ABORTED_ERROR","undefined","showRateLimitReached","style","showExtensionConnectedAlert","showChannelClosedAlert","showInternalErrorAlert","_g","alertConfig","showPairAlert","pairingPayload","p2pSyncCode","p2pPeerInfo","postmessageSyncCode","postmessagePeerInfo","preferredNetwork","closeButtonCallback","abortedHandler","disclaimerText","showPermissionSuccessAlert","output","address","network","scopes","join","showOperationSuccessAlert","account","blockExplorer","transactionHash","actionLogo","getTransactionLink","open","showSignSuccessAlert","signature","navigator","clipboard","writeText","then","showBroadcastSuccessAlert","emptyHandler","defaultEventCallbacks","PERMISSION_REQUEST_SENT","PERMISSION_REQUEST_SUCCESS","PERMISSION_REQUEST_ERROR","OPERATION_REQUEST_SENT","OPERATION_REQUEST_SUCCESS","OPERATION_REQUEST_ERROR","SIGN_REQUEST_SENT","SIGN_REQUEST_SUCCESS","SIGN_REQUEST_ERROR","BROADCAST_REQUEST_SENT","BROADCAST_REQUEST_SUCCESS","BROADCAST_REQUEST_ERROR","ACKNOWLEDGE_RECEIVED","LOCAL_RATE_LIMIT_REACHED","NO_PERMISSIONS","ACTIVE_ACCOUNT_SET","ACTIVE_TRANSPORT_SET","SHOW_PREPARE","HIDE_UI","PAIR_INIT","PAIR_SUCCESS","CHANNEL_CLOSED","INTERNAL_ERROR","UNKNOWN","BeaconEventHandler","constructor","eventsToOverride","arguments","length","overrideAll","callbackMap","setAllHandlers","overrideDefaults","on","event","eventCallback","listeners","emit","forEach","listener","listenerError","Object","keys","untypedEvent","eventType","handler","_len","Array","_key"],"sources":["../../src/events.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module"}