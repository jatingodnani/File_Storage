{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { generateGUID } from '@airgap/beacon-utils';\nimport { toastTemplates } from './toast-templates';\nimport { getColorMode } from '../../utils/colorMode';\nimport { createIconSVGExternal, createSanitizedElement } from '../../utils/html-elements';\nimport { constructPoweredByBeacon, constructToastContainer } from '../../utils/templates';\nlet document;\nif (typeof window !== 'undefined' && typeof window.document !== 'undefined') {\n  document = window.document;\n}\nconst EXPAND_AFTER = 5 * 1000;\nlet timeout;\nlet expandTimeout;\nlet globalToastConfig;\nconst createActionItem = toastAction => __awaiter(void 0, void 0, void 0, function* () {\n  const {\n    text,\n    isBold,\n    actionText,\n    actionLogo,\n    actionCallback\n  } = toastAction;\n  const id = yield generateGUID();\n  const wrapper = document.createElement('div');\n  wrapper.classList.add('beacon-toast__action__item');\n  removeAllChildNodes(wrapper);\n  const wrapBold = element => {\n    return createSanitizedElement('strong', [], [], element);\n  };\n  if (actionCallback) {\n    if (text.length > 0) {\n      wrapper.appendChild(createSanitizedElement('p', [], [], text));\n    }\n    const textEl = createSanitizedElement('span', [], [], [createSanitizedElement('span', [], [], actionText), actionLogo && actionLogo === 'external' ? createIconSVGExternal() : undefined]);\n    wrapper.appendChild(createSanitizedElement('p', [], [], [createSanitizedElement('a', [], [['id', id]], [isBold ? wrapBold([textEl]) : textEl])]));\n  } else if (actionText) {\n    if (text.length > 0) {\n      wrapper.appendChild(createSanitizedElement('p', ['beacon-toast__action__item__subtitle'], [], text));\n    }\n    const textEl = createSanitizedElement('span', [], [], actionText);\n    wrapper.appendChild(createSanitizedElement('p', [], [], [isBold ? wrapBold([textEl]) : textEl]));\n  } else {\n    const textEl = createSanitizedElement('p', [], [], text);\n    wrapper.appendChild(isBold ? wrapBold([textEl]) : textEl);\n  }\n  if (actionCallback) {\n    wrapper.addEventListener('click', actionCallback);\n  }\n  return wrapper;\n});\nconst removeAllChildNodes = parent => {\n  while (parent.firstChild) {\n    parent.removeChild(parent.firstChild);\n  }\n};\nconst formatToastText = html => {\n  var _a, _b;\n  const walletIcon = (_a = globalToastConfig === null || globalToastConfig === void 0 ? void 0 : globalToastConfig.walletInfo) === null || _a === void 0 ? void 0 : _a.icon;\n  const walletName = (_b = globalToastConfig === null || globalToastConfig === void 0 ? void 0 : globalToastConfig.walletInfo) === null || _b === void 0 ? void 0 : _b.name;\n  let walletEl;\n  const walletNameEl = createSanitizedElement('strong', [], [], walletName !== null && walletName !== void 0 ? walletName : 'Wallet');\n  if (walletIcon) {\n    walletEl = createSanitizedElement('span', ['beacon-toast__wallet__container'], [], [createSanitizedElement('img', ['beacon-toast__content__img'], [['src', walletIcon]], ''), walletNameEl]);\n  } else {\n    walletEl = walletNameEl;\n  }\n  const splits = html.split(`{{wallet}}`);\n  if (splits.length === 1) {\n    return [createSanitizedElement('span', [], [], html)];\n  } else {\n    const out = [];\n    for (let x = 0; x < splits.length; x++) {\n      out.push(createSanitizedElement('span', [], [], splits[x]));\n      if (x < splits.length - 1) {\n        out.push(walletEl);\n      }\n    }\n    return out;\n  }\n};\nconst getToastHTML = config => {\n  const text = config.body;\n  const elements = formatToastText(text);\n  const outerEl = createSanitizedElement('span', ['beacon-toast__wallet__outer'], [], elements);\n  const toastContainerEl = constructToastContainer([outerEl]);\n  return {\n    style: toastTemplates.default.css,\n    html: toastContainerEl\n  };\n};\n/**\n * Close a toast\n */\nconst closeToast = () => new Promise(resolve => {\n  var _a;\n  globalToastConfig = undefined;\n  const wrapper = document.getElementById('beacon-toast-wrapper');\n  if (!wrapper) {\n    return resolve();\n  }\n  const elm = (_a = wrapper.shadowRoot) === null || _a === void 0 ? void 0 : _a.getElementById('beacon-toast');\n  if (elm) {\n    const animationDuration = 300;\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = undefined;\n    }\n    elm.className = elm.className.replace('fadeIn', 'fadeOut');\n    window.setTimeout(() => {\n      const parent = wrapper.parentNode;\n      if (parent) {\n        parent.removeChild(wrapper);\n      }\n      resolve();\n    }, animationDuration);\n  } else {\n    resolve();\n  }\n});\nconst registerClick = (shadowRoot, id, callback) => {\n  const button = shadowRoot.getElementById(id);\n  if (button) {\n    button.addEventListener('click', () => __awaiter(void 0, void 0, void 0, function* () {\n      yield callback(button);\n    }));\n  }\n  return button;\n};\nconst showElement = (shadowRoot, id) => {\n  const el = shadowRoot.getElementById(id);\n  if (el) {\n    el.classList.remove('hide');\n    el.classList.add('show');\n  }\n};\nconst hideElement = (shadowRoot, id) => {\n  const el = shadowRoot.getElementById(id);\n  if (el) {\n    el.classList.add('hide');\n    el.classList.remove('show');\n  }\n};\n// const showLoader = (): void => {\n//   showElement('beacon-toast-loader')\n// }\nconst hideLoader = shadowRoot => {\n  hideElement(shadowRoot, 'beacon-toast-loader');\n  showElement(shadowRoot, 'beacon-toast-loader-placeholder');\n};\nconst showExpand = shadowRoot => {\n  showElement(shadowRoot, 'beacon-toast-button-expand');\n  hideElement(shadowRoot, 'beacon-toast-button-close');\n};\nconst showClose = shadowRoot => {\n  showElement(shadowRoot, 'beacon-toast-button-close');\n  hideElement(shadowRoot, 'beacon-toast-button-expand');\n};\nconst collapseList = shadowRoot => {\n  const expandButton = shadowRoot.getElementById('beacon-toast-button-expand');\n  const list = shadowRoot.getElementById('beacon-toast-list');\n  if (expandButton && list) {\n    expandButton.classList.remove('beacon-toast__upside_down');\n    list.classList.add('hide');\n    list.classList.remove('show');\n  }\n};\nconst expandList = shadowRoot => {\n  const expandButton = shadowRoot.getElementById('beacon-toast-button-expand');\n  const list = shadowRoot.getElementById('beacon-toast-list');\n  if (expandButton && list) {\n    expandButton.classList.add('beacon-toast__upside_down');\n    list.classList.remove('hide');\n    list.classList.add('show');\n  }\n};\nconst expandOrCollapseList = shadowRoot => {\n  const expandButton = shadowRoot.getElementById('beacon-toast-button-expand');\n  const list = shadowRoot.getElementById('beacon-toast-list');\n  if (expandButton && list) {\n    if (expandButton.classList.contains('beacon-toast__upside_down')) {\n      collapseList(shadowRoot);\n    } else {\n      expandList(shadowRoot);\n    }\n  }\n};\nconst addActionsToToast = (shadowRoot, toastConfig, list) => __awaiter(void 0, void 0, void 0, function* () {\n  const actions = toastConfig.actions;\n  if (actions && actions.length > 0) {\n    const actionPromises = actions.map(action => __awaiter(void 0, void 0, void 0, function* () {\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      return createActionItem(action);\n    }));\n    const actionItems = yield Promise.all(actionPromises);\n    actionItems.forEach(item => list.appendChild(item));\n    const poweredByBeacon = document.createElement('small');\n    poweredByBeacon.classList.add('beacon-toast__powered');\n    poweredByBeacon.appendChild(constructPoweredByBeacon());\n    list.appendChild(poweredByBeacon);\n    showExpand(shadowRoot);\n  } else {\n    showClose(shadowRoot);\n    collapseList(shadowRoot);\n  }\n});\nconst createNewToast = toastConfig => __awaiter(void 0, void 0, void 0, function* () {\n  globalToastConfig = toastConfig;\n  const timer = toastConfig.timer;\n  const shadowRootEl = document.createElement('div');\n  shadowRootEl.setAttribute('id', 'beacon-toast-wrapper');\n  const shadowRoot = shadowRootEl.attachShadow({\n    mode: 'open'\n  });\n  const wrapper = document.createElement('div');\n  const {\n    style,\n    html\n  } = getToastHTML(toastConfig);\n  wrapper.appendChild(html);\n  const styleEl = document.createElement('style');\n  styleEl.textContent = style;\n  shadowRoot.appendChild(wrapper);\n  shadowRoot.appendChild(styleEl);\n  if (timer) {\n    timeout = window.setTimeout(() => __awaiter(void 0, void 0, void 0, function* () {\n      yield closeToast();\n    }), timer);\n  }\n  document.body.prepend(shadowRootEl);\n  const colorMode = getColorMode();\n  const elm = shadowRoot.getElementById(`beacon-toast`);\n  if (elm) {\n    elm.classList.add(`theme__${colorMode}`);\n  }\n  const list = shadowRoot.getElementById('beacon-toast-list');\n  if (list) {\n    yield addActionsToToast(shadowRoot, toastConfig, list);\n  }\n  const openWalletButtonEl = shadowRoot.getElementById('beacon-open-wallet');\n  if (openWalletButtonEl) {\n    if (toastConfig.openWalletAction) {\n      openWalletButtonEl.addEventListener('click', () => {\n        if (toastConfig.openWalletAction) {\n          toastConfig.openWalletAction();\n        }\n      });\n    } else {\n      openWalletButtonEl.classList.add('hide');\n    }\n  }\n  if (globalToastConfig.state === 'loading') {\n    expandTimeout = window.setTimeout(() => __awaiter(void 0, void 0, void 0, function* () {\n      const expandButton = shadowRoot.getElementById('beacon-toast-button-expand');\n      if (expandButton && !expandButton.classList.contains('beacon-toast__upside_down')) {\n        expandOrCollapseList(shadowRoot);\n      }\n    }), EXPAND_AFTER);\n  }\n  registerClick(shadowRoot, 'beacon-toast-button-done', () => __awaiter(void 0, void 0, void 0, function* () {\n    yield closeToast();\n  }));\n  const closeButton = registerClick(shadowRoot, 'beacon-toast-button-close', () => __awaiter(void 0, void 0, void 0, function* () {\n    yield closeToast();\n  }));\n  if (closeButton && globalToastConfig.state === 'loading') {\n    closeButton.classList.add('hide');\n  }\n  registerClick(shadowRoot, 'beacon-toast-button-expand', () => __awaiter(void 0, void 0, void 0, function* () {\n    expandOrCollapseList(shadowRoot);\n  }));\n});\nconst updateToast = toastConfig => __awaiter(void 0, void 0, void 0, function* () {\n  globalToastConfig = Object.assign(Object.assign({}, globalToastConfig), toastConfig);\n  const timer = toastConfig.timer;\n  const wrapper = document.getElementById('beacon-toast-wrapper');\n  if (!wrapper) {\n    return;\n  }\n  const shadowRoot = wrapper.shadowRoot;\n  if (!shadowRoot) {\n    return;\n  }\n  const list = shadowRoot.getElementById('beacon-toast-list');\n  if (list) {\n    removeAllChildNodes(list);\n    yield addActionsToToast(shadowRoot, toastConfig, list);\n  }\n  if (globalToastConfig.state === 'loading') {\n    expandTimeout = window.setTimeout(() => __awaiter(void 0, void 0, void 0, function* () {\n      const expandButton = shadowRoot.getElementById('beacon-toast-button-expand');\n      if (expandButton && !expandButton.classList.contains('beacon-toast__upside_down')) {\n        expandOrCollapseList(shadowRoot);\n      }\n    }), EXPAND_AFTER);\n  }\n  const toastTextEl = shadowRoot.getElementById('beacon-text-content');\n  if (toastTextEl) {\n    removeAllChildNodes(toastTextEl);\n    toastTextEl.appendChild(createSanitizedElement('span', ['beacon-toast__wallet__outer'], [], formatToastText(toastConfig.body)));\n  }\n  const openWalletButtonEl = shadowRoot.getElementById('beacon-open-wallet');\n  if (openWalletButtonEl) {\n    if (toastConfig.openWalletAction) {\n      openWalletButtonEl.classList.remove('hide');\n      openWalletButtonEl.addEventListener('click', () => {\n        if (toastConfig.openWalletAction) {\n          toastConfig.openWalletAction();\n        }\n      });\n    } else {\n      openWalletButtonEl.classList.add('hide');\n    }\n  }\n  if (timer) {\n    timeout = window.setTimeout(() => __awaiter(void 0, void 0, void 0, function* () {\n      yield closeToast();\n    }), timer);\n  }\n  const doneButton = shadowRoot.getElementById('beacon-toast-button-done');\n  if (doneButton) {\n    doneButton.addEventListener('click', () => __awaiter(void 0, void 0, void 0, function* () {\n      yield closeToast();\n    }));\n  }\n});\n/**\n * Create a new toast\n *\n * @param toastConfig Configuration of the toast\n */\nconst openToast = toastConfig => __awaiter(void 0, void 0, void 0, function* () {\n  var _a;\n  if (expandTimeout) {\n    clearTimeout(expandTimeout);\n  }\n  const wrapper = document.getElementById('beacon-toast-wrapper');\n  if (wrapper) {\n    if (toastConfig.forceNew) {\n      yield closeToast();\n      yield createNewToast(toastConfig);\n    } else {\n      yield updateToast(toastConfig);\n    }\n  } else {\n    yield createNewToast(toastConfig);\n  }\n  if (globalToastConfig && globalToastConfig.state === 'finished') {\n    const shadowRoot = (_a = document.getElementById('beacon-toast-wrapper')) === null || _a === void 0 ? void 0 : _a.shadowRoot;\n    if (shadowRoot) {\n      hideLoader(shadowRoot);\n      showClose(shadowRoot);\n      expandList(shadowRoot);\n    }\n  }\n  return;\n});\nexport { closeToast, openToast };","map":{"version":3,"names":["generateGUID","toastTemplates","getColorMode","createIconSVGExternal","createSanitizedElement","constructPoweredByBeacon","constructToastContainer","document","window","EXPAND_AFTER","timeout","expandTimeout","globalToastConfig","createActionItem","toastAction","__awaiter","text","isBold","actionText","actionLogo","actionCallback","id","wrapper","createElement","classList","add","removeAllChildNodes","wrapBold","element","length","appendChild","textEl","undefined","addEventListener","parent","firstChild","removeChild","formatToastText","html","walletIcon","_a","walletInfo","icon","walletName","_b","name","walletEl","walletNameEl","splits","split","out","x","push","getToastHTML","config","body","elements","outerEl","toastContainerEl","style","default","css","closeToast","Promise","resolve","getElementById","elm","shadowRoot","animationDuration","clearTimeout","className","replace","setTimeout","parentNode","registerClick","callback","button","showElement","el","remove","hideElement","hideLoader","showExpand","showClose","collapseList","expandButton","list","expandList","expandOrCollapseList","contains","addActionsToToast","toastConfig","actions","actionPromises","map","action","actionItems","all","forEach","item","poweredByBeacon","createNewToast","timer","shadowRootEl","setAttribute","attachShadow","mode","styleEl","textContent","prepend","colorMode","openWalletButtonEl","openWalletAction","state","closeButton","updateToast","Object","assign","toastTextEl","doneButton","openToast","forceNew"],"sources":["../../../../src/ui/toast/Toast.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module"}