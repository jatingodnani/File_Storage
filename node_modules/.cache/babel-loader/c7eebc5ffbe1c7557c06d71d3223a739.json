{"ast":null,"code":"// https://gist.github.com/mudge/5830382?permalink_comment_id=2658721#gistcomment-2658721\nexport class EventEmitter {\n  constructor() {\n    this.events = {};\n  }\n  on(event, listener) {\n    if (typeof this.events[event] !== 'object') {\n      this.events[event] = [];\n    }\n    this.events[event].push(listener);\n    return () => this.removeListener(event, listener);\n  }\n  removeListener(event, listener) {\n    if (typeof this.events[event] !== 'object') {\n      return;\n    }\n    if (!listener) {\n      this.events[event] = [];\n      return;\n    }\n    const idx = this.events[event].indexOf(listener);\n    if (idx > -1) {\n      this.events[event].splice(idx, 1);\n    }\n  }\n  removeAllListeners() {\n    Object.keys(this.events).forEach(event => this.events[event].splice(0, this.events[event].length));\n  }\n  emit(event) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    if (typeof this.events[event] !== 'object') {\n      return;\n    }\n    ;\n    [...this.events[event]].forEach(listener => listener.apply(this, args));\n  }\n  once(event, listener) {\n    var _this = this;\n    const remove = this.on(event, function () {\n      remove();\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      listener.apply(_this, args);\n    });\n    return remove;\n  }\n}","map":{"version":3,"names":["EventEmitter","constructor","events","on","event","listener","push","removeListener","idx","indexOf","splice","removeAllListeners","Object","keys","forEach","length","emit","_len","arguments","args","Array","_key","apply","once","_this","remove","_len2","_key2"],"sources":["../../../src/matrix-client/EventEmitter.ts"],"sourcesContent":[null],"mappings":"AAAA;AAOA,OAAM,MAAOA,YAAY;EAAzBC,YAAA;IACmB,KAAAC,MAAM,GAAY,EAAE;EAiDvC;EA/CSC,EAAEA,CAACC,KAAa,EAAEC,QAAkB;IACzC,IAAI,OAAO,IAAI,CAACH,MAAM,CAACE,KAAK,CAAC,KAAK,QAAQ,EAAE;MAC1C,IAAI,CAACF,MAAM,CAACE,KAAK,CAAC,GAAG,EAAE;;IAGzB,IAAI,CAACF,MAAM,CAACE,KAAK,CAAC,CAACE,IAAI,CAACD,QAAQ,CAAC;IACjC,OAAO,MAAM,IAAI,CAACE,cAAc,CAACH,KAAK,EAAEC,QAAQ,CAAC;EACnD;EAEOE,cAAcA,CAACH,KAAa,EAAEC,QAAmB;IACtD,IAAI,OAAO,IAAI,CAACH,MAAM,CAACE,KAAK,CAAC,KAAK,QAAQ,EAAE;MAC1C;;IAGF,IAAI,CAACC,QAAQ,EAAE;MACb,IAAI,CAACH,MAAM,CAACE,KAAK,CAAC,GAAG,EAAE;MACvB;;IAGF,MAAMI,GAAG,GAAW,IAAI,CAACN,MAAM,CAACE,KAAK,CAAC,CAACK,OAAO,CAACJ,QAAQ,CAAC;IACxD,IAAIG,GAAG,GAAG,CAAC,CAAC,EAAE;MACZ,IAAI,CAACN,MAAM,CAACE,KAAK,CAAC,CAACM,MAAM,CAACF,GAAG,EAAE,CAAC,CAAC;;EAErC;EAEOG,kBAAkBA,CAAA;IACvBC,MAAM,CAACC,IAAI,CAAC,IAAI,CAACX,MAAM,CAAC,CAACY,OAAO,CAAEV,KAAa,IAC7C,IAAI,CAACF,MAAM,CAACE,KAAK,CAAC,CAACM,MAAM,CAAC,CAAC,EAAE,IAAI,CAACR,MAAM,CAACE,KAAK,CAAC,CAACW,MAAM,CAAC,CACxD;EACH;EAEOC,IAAIA,CAACZ,KAAa,EAAgB;IAAA,SAAAa,IAAA,GAAAC,SAAA,CAAAH,MAAA,EAAXI,IAAW,OAAAC,KAAA,CAAAH,IAAA,OAAAA,IAAA,WAAAI,IAAA,MAAAA,IAAA,GAAAJ,IAAA,EAAAI,IAAA;MAAXF,IAAW,CAAAE,IAAA,QAAAH,SAAA,CAAAG,IAAA;IAAA;IACvC,IAAI,OAAO,IAAI,CAACnB,MAAM,CAACE,KAAK,CAAC,KAAK,QAAQ,EAAE;MAC1C;;IAGF;IAAC,CAAC,GAAG,IAAI,CAACF,MAAM,CAACE,KAAK,CAAC,CAAC,CAACU,OAAO,CAAET,QAAQ,IAAKA,QAAQ,CAACiB,KAAK,CAAC,IAAI,EAAEH,IAAI,CAAC,CAAC;EAC5E;EAEOI,IAAIA,CAACnB,KAAa,EAAEC,QAAkB;IAAA,IAAAmB,KAAA;IAC3C,MAAMC,MAAM,GAAe,IAAI,CAACtB,EAAE,CAACC,KAAK,EAAE,YAAmB;MAC3DqB,MAAM,EAAE;MAAA,SAAAC,KAAA,GAAAR,SAAA,CAAAH,MAAA,EADoCI,IAAW,OAAAC,KAAA,CAAAM,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;QAAXR,IAAW,CAAAQ,KAAA,IAAAT,SAAA,CAAAS,KAAA;MAAA;MAEvDtB,QAAQ,CAACiB,KAAK,CAACE,KAAI,EAAEL,IAAI,CAAC;IAC5B,CAAC,CAAC;IAEF,OAAOM,MAAM;EACf"},"metadata":{},"sourceType":"module"}