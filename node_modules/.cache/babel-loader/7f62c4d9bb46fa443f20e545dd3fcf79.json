{"ast":null,"code":"export var ExposedPromiseStatus;\n(function (ExposedPromiseStatus) {\n  ExposedPromiseStatus[\"PENDING\"] = \"pending\";\n  ExposedPromiseStatus[\"RESOLVED\"] = \"resolved\";\n  ExposedPromiseStatus[\"REJECTED\"] = \"rejected\";\n})(ExposedPromiseStatus || (ExposedPromiseStatus = {}));\nconst notInitialized = () => {\n  throw new Error('ExposedPromise not initialized yet.');\n};\n/**\n * Exposed promise allow you to create a promise and then resolve it later, from the outside\n */\nexport class ExposedPromise {\n  constructor() {\n    this._resolve = notInitialized;\n    this._reject = notInitialized;\n    this._status = ExposedPromiseStatus.PENDING;\n    this._promise = new Promise((innerResolve, innerReject) => {\n      this._resolve = value => {\n        if (this.isSettled()) {\n          return;\n        }\n        this._promiseResult = value;\n        innerResolve(value);\n        this._status = ExposedPromiseStatus.RESOLVED;\n        return;\n      };\n      this._reject = reason => {\n        if (this.isSettled()) {\n          return;\n        }\n        this._promiseError = reason;\n        innerReject(reason);\n        this._status = ExposedPromiseStatus.REJECTED;\n        return;\n      };\n    });\n  }\n  get promise() {\n    return this._promise;\n  }\n  get resolve() {\n    return this._resolve;\n  }\n  get reject() {\n    return this._reject;\n  }\n  get status() {\n    return this._status;\n  }\n  get promiseResult() {\n    return this._promiseResult;\n  }\n  get promiseError() {\n    return this._promiseError;\n  }\n  static resolve(value) {\n    const promise = new ExposedPromise();\n    promise.resolve(value);\n    return promise;\n  }\n  static reject(reason) {\n    const promise = new ExposedPromise();\n    promise.reject(reason);\n    return promise;\n  }\n  isPending() {\n    return this.status === ExposedPromiseStatus.PENDING;\n  }\n  isResolved() {\n    return this.status === ExposedPromiseStatus.RESOLVED;\n  }\n  isRejected() {\n    return this.status === ExposedPromiseStatus.REJECTED;\n  }\n  isSettled() {\n    return this.isResolved() || this.isRejected();\n  }\n}","map":{"version":3,"names":["ExposedPromiseStatus","notInitialized","Error","ExposedPromise","constructor","_resolve","_reject","_status","PENDING","_promise","Promise","innerResolve","innerReject","value","isSettled","_promiseResult","RESOLVED","reason","_promiseError","REJECTED","promise","resolve","reject","status","promiseResult","promiseError","isPending","isResolved","isRejected"],"sources":["../../../src/utils/exposed-promise.ts"],"sourcesContent":[null],"mappings":"AAAA,WAAYA,oBAIX;AAJD,WAAYA,oBAAoB;EAC9BA,oBAAA,uBAAmB;EACnBA,oBAAA,yBAAqB;EACrBA,oBAAA,yBAAqB;AACvB,CAAC,EAJWA,oBAAoB,KAApBA,oBAAoB;AAShC,MAAMC,cAAc,GAAGA,CAAA,KAAY;EACjC,MAAM,IAAIC,KAAK,CAAC,qCAAqC,CAAC;AACxD,CAAC;AAED;;;AAGA,OAAM,MAAOC,cAAc;EA6BzBC,YAAA;IA1BQ,KAAAC,QAAQ,GAAeJ,cAAc;IACrC,KAAAK,OAAO,GAAcL,cAAc;IACnC,KAAAM,OAAO,GAAyBP,oBAAoB,CAACQ,OAAO;IAyBlE,IAAI,CAACC,QAAQ,GAAG,IAAIC,OAAO,CAAI,CAACC,YAAwB,EAAEC,WAAsB,KAAU;MACxF,IAAI,CAACP,QAAQ,GAAIQ,KAAQ,IAAU;QACjC,IAAI,IAAI,CAACC,SAAS,EAAE,EAAE;UACpB;;QAGF,IAAI,CAACC,cAAc,GAAGF,KAAK;QAE3BF,YAAY,CAACE,KAAK,CAAC;QAEnB,IAAI,CAACN,OAAO,GAAGP,oBAAoB,CAACgB,QAAQ;QAE5C;MACF,CAAC;MACD,IAAI,CAACV,OAAO,GAAIW,MAAU,IAAU;QAClC,IAAI,IAAI,CAACH,SAAS,EAAE,EAAE;UACpB;;QAGF,IAAI,CAACI,aAAa,GAAGD,MAAM;QAE3BL,WAAW,CAACK,MAAM,CAAC;QAEnB,IAAI,CAACV,OAAO,GAAGP,oBAAoB,CAACmB,QAAQ;QAE5C;MACF,CAAC;IACH,CAAC,CAAC;EACJ;EAjDA,IAAWC,OAAOA,CAAA;IAChB,OAAO,IAAI,CAACX,QAAQ;EACtB;EAEA,IAAWY,OAAOA,CAAA;IAChB,OAAO,IAAI,CAAChB,QAAQ;EACtB;EACA,IAAWiB,MAAMA,CAAA;IACf,OAAO,IAAI,CAAChB,OAAO;EACrB;EACA,IAAWiB,MAAMA,CAAA;IACf,OAAO,IAAI,CAAChB,OAAO;EACrB;EACA,IAAWiB,aAAaA,CAAA;IACtB,OAAO,IAAI,CAACT,cAAc;EAC5B;EACA,IAAWU,YAAYA,CAAA;IACrB,OAAO,IAAI,CAACP,aAAa;EAC3B;EAiCO,OAAOG,OAAOA,CAAIR,KAAQ;IAC/B,MAAMO,OAAO,GAAG,IAAIjB,cAAc,EAAK;IACvCiB,OAAO,CAACC,OAAO,CAACR,KAAK,CAAC;IAEtB,OAAOO,OAAO;EAChB;EAEO,OAAOE,MAAMA,CAAyBL,MAAU;IACrD,MAAMG,OAAO,GAAG,IAAIjB,cAAc,EAAQ;IAC1CiB,OAAO,CAACE,MAAM,CAACL,MAAM,CAAC;IAEtB,OAAOG,OAAO;EAChB;EAEOM,SAASA,CAAA;IACd,OAAO,IAAI,CAACH,MAAM,KAAKvB,oBAAoB,CAACQ,OAAO;EACrD;EAEOmB,UAAUA,CAAA;IACf,OAAO,IAAI,CAACJ,MAAM,KAAKvB,oBAAoB,CAACgB,QAAQ;EACtD;EAEOY,UAAUA,CAAA;IACf,OAAO,IAAI,CAACL,MAAM,KAAKvB,oBAAoB,CAACmB,QAAQ;EACtD;EAEOL,SAASA,CAAA;IACd,OAAO,IAAI,CAACa,UAAU,EAAE,IAAI,IAAI,CAACC,UAAU,EAAE;EAC/C"},"metadata":{},"sourceType":"module"}